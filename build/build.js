function require(a,b,c){var d=require.resolve(a);if(null==d){c=c||a,b=b||"root";var e=new Error('Failed to require "'+c+'" from "'+b+'"');throw e.path=c,e.parent=b,e.require=!0,e}var f=require.modules[d];if(!f._resolving&&!f.exports){var g={};g.exports={},g.client=g.component=!0,f._resolving=!0,f.call(this,g.exports,require.relative(d),g),delete f._resolving,f.exports=g.exports}return f.exports}require.modules={},require.mains={},require.main=function(a,b){require.mains[a]=b},require.resolve=function(a){"/"==a.charAt(0)&&(a=a.slice(1));var b=[a,a+".js",a+".json",a+"/index.js",a+"/index.json"];require.mains[a]&&(b=[a+"/"+require.mains[a]]);for(var c=0,d=b.length;d>c;c++){var a=b[c];if(require.modules.hasOwnProperty(a))return a}},require.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0,e=b.length;e>d;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},require.register=function(a,b){require.modules[a]=b},require.relative=function(a){function b(c){var d=b.resolve(c);return require(d,a,c)}var c=require.normalize(a,"..");return b.resolve=function(a){var b=a.charAt(0);return"/"==b?a.slice(1):"."==b?require.normalize(c,a):a},b.exists=function(a){return require.modules.hasOwnProperty(b.resolve(a))},b},require.register("component-indexof/index.js",function(a,b,c){c.exports=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}}),require.register("component-emitter/index.js",function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}var f=b("component-indexof");c.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},b._off=c,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;var d=f(c,b._off||b);return~d&&c.splice(d,1),this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}}),require.register("pgherveou-modelarray/index.js",function(a,b,c){function d(a,b){var c=[];return c.__proto__=this,Object.defineProperty(this,"_silent",{}),Object.defineProperty(this,"_callbacks",{value:Object.create(null)}),Object.defineProperty(this,"_byId",{value:Object.create(null)}),Object.defineProperty(this,"model",{value:b}),a&&Array.isArray(a)?c.silent().push.apply(c,a):a&&c.silent().push.call(c,a),c}function e(){var a=[],b=Object.create(null);return[].forEach.call(arguments,function(c){if(!this.get(c)){var d=this._cast(c),e=d.id||d.cid||d;b[e]||(a.push(d),"object"!=typeof e&&(b[e]=!0))}},this),a}var f=b("component-emitter");d.prototype=f([]),c.exports=d,d.prototype.model,d.prototype._cast=function(a){return this.model?a instanceof this.model?a:new this.model(a):a},d.prototype.silent=function(a){return void 0===a&&(a=!0),this._silent=a,this},d.prototype.emit=function(){return this._silent?this._silent=!1:f.prototype.emit.apply(this,arguments),this},d.prototype.index=function(){var a;[].forEach.call(arguments,function(b){b.id&&(this._byId[b.id]=b),b.cid&&(this._byId[b.cid]=b),b.id||b.cid||"object"==typeof(a=b.valueOf())||(this._byId[a]=b)},this)},d.prototype.unindex=function(){[].forEach.call(arguments,function(a){a.id&&delete this._byId[a.id],a.cid&&delete this._byId[a.cid],a.id||a.cid||delete this._byId[a.valueOf()]},this)},d.prototype.get=function(a){if(a){var b=a.id||a.cid||a.valueOf();return b&&"object"!=typeof b?this._byId[b]:this[this.indexOf(b)]}},d.prototype.id=d.prototype.get,d.prototype.remove=function(){var a=[];return[].forEach.call(arguments,function(b){b=this.get(b),b&&(a.push(b),this.unindex(b),[].splice.call(this,this.indexOf(b),1))},this),a.length?this.emit("remove",a,this):this.silent(!1),a},d.prototype.set=function(a){var b,c=[],d=[],e=[],f=!!this._silent;return Array.isArray(a)||(a=[a]),a.map(this._cast,this).forEach(function(a){var b=this.get(a);b?(e.push(b.id||b.cid||b.valueOf()),b.set?b.set(a):(this.unindex(b),this.index(a),this[this.indexOf(b)]=a)):c.push(a)},this),this.forEach(function(a){b=a.id||a.cid||a.valueOf(),-1===e.indexOf(b)&&d.push(a)}),d.length&&this.silent(f).remove.apply(this,d),c.length&&this.silent(f).push.apply(this,c),this.silent(!1),this},d.prototype.reset=function(a){[].splice.call(this,0,this.length),this._byId=Object.create(null),this.silent().push(a),this.emit("reset",a,this)},d.prototype.push=function(){var a,b;return a=e.apply(this,arguments),b=[].push.apply(this,a),this.index.apply(this,a),a.length?this.emit("add",a,this):this.silent(!1),b},d.prototype.pop=function(){var a=[].pop.call(this);return this.unindex(a),a?this.emit("remove",a,this):this.silent(!1),a},d.prototype.splice=function(){var a,b,c,d,f=!!this._silent;return arguments.length&&(b=[].slice.call(arguments,0,2),c=[].splice.apply(this,b),d=e.apply(this,[].slice.call(arguments,2)),[].splice.apply(this,[arguments[0],0].concat(d)),this.unindex.apply(this,c),this.index.apply(this,d)),c.length&&this.silent(f).emit("remove",c,this),d.length&&this.silent(f).emit("add",d,this),this.silent(!1),a},d.prototype.unshift=function(){var a,b;return a=e.apply(this,arguments),b=[].unshift.apply(this,a),this.index.apply(this,a),a.length?this.emit("add",a,this):this.silent(!1),b},d.prototype.shift=function(){var a=[].shift.call(this);return this.unindex(a),a?this.emit("remove",a,this):this.silent(!1),a},d.prototype.sort=function(a){var b=a||this.model&&this.model.prototype&&this.model.prototype.compare,c=[].sort.call(this,b);return this.emit("sort",this),c},d.prototype.toJSON=function(){return this.map(function(a){return a.toJSON?a.toJSON():a})}}),require.register("chaijs-assertion-error/index.js",function(a,b,c){function d(){function a(a,c){Object.keys(c).forEach(function(d){~b.indexOf(d)||(a[d]=c[d])})}var b=[].slice.call(arguments);return function(){for(var b=[].slice.call(arguments),c=0,d={};c<b.length;c++)a(d,b[c]);return d}}function e(a,b,c){var e=d("name","message","stack","constructor","toJSON"),f=e(b||{});this.message=a||"Unspecified AssertionError",this.showDiff=!1;for(var g in f)this[g]=f[g];c=c||arguments.callee,c&&Error.captureStackTrace&&Error.captureStackTrace(this,c)}c.exports=e,e.prototype=Object.create(Error.prototype),e.prototype.name="AssertionError",e.prototype.constructor=e,e.prototype.toJSON=function(a){var b=d("constructor","toJSON","stack"),c=b({name:this.name},this);return!1!==a&&this.stack&&(c.stack=this.stack),c}}),require.register("chaijs-chai/index.js",function(a,b,c){c.exports=b("./lib/chai")}),require.register("chaijs-chai/lib/chai.js",function(a,b,c){var d=[],a=c.exports={};a.version="1.7.2",a.AssertionError=b("chaijs-assertion-error");var e=b("./chai/utils");a.use=function(a){return~d.indexOf(a)||(a(this,e),d.push(a)),this};var f=b("./chai/assertion");a.use(f);var g=b("./chai/core/assertions");a.use(g);var h=b("./chai/interface/expect");a.use(h);var i=b("./chai/interface/should");a.use(i);var j=b("./chai/interface/assert");a.use(j)}),require.register("chaijs-chai/lib/chai/assertion.js",function(a,b,c){c.exports=function(a,b){function c(a,b,c){e(this,"ssfi",c||arguments.callee),e(this,"object",a),e(this,"message",b)}var d=a.AssertionError,e=b.flag;a.Assertion=c,c.includeStack=!1,c.showDiff=!0,c.addProperty=function(a,c){b.addProperty(this.prototype,a,c)},c.addMethod=function(a,c){b.addMethod(this.prototype,a,c)},c.addChainableMethod=function(a,c,d){b.addChainableMethod(this.prototype,a,c,d)},c.overwriteProperty=function(a,c){b.overwriteProperty(this.prototype,a,c)},c.overwriteMethod=function(a,c){b.overwriteMethod(this.prototype,a,c)},c.prototype.assert=function(a,f,g,h,i,j){var k=b.test(this,arguments);if(!0!==j&&(j=!1),!0!==c.showDiff&&(j=!1),!k){var f=b.getMessage(this,arguments),l=b.getActual(this,arguments);throw new d(f,{actual:l,expected:h,showDiff:j},c.includeStack?this.assert:e(this,"ssfi"))}},Object.defineProperty(c.prototype,"_obj",{get:function(){return e(this,"object")},set:function(a){e(this,"object",a)}})}}),require.register("chaijs-chai/lib/chai/core/assertions.js",function(a,b,c){c.exports=function(a,b){function c(a,c){c&&u(this,"message",c),a=a.toLowerCase();var d=u(this,"object"),e=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an ":"a ";this.assert(a===b.type(d),"expected #{this} to be "+e+a,"expected #{this} not to be "+e+a)}function d(){u(this,"contains",!0)}function e(a,c){c&&u(this,"message",c);var d=u(this,"object");this.assert(~d.indexOf(a),"expected #{this} to include "+b.inspect(a),"expected #{this} to not include "+b.inspect(a))}function f(){var a=u(this,"object"),b=Object.prototype.toString.call(a);this.assert("[object Arguments]"===b,"expected #{this} to be arguments but got "+b,"expected #{this} to not be arguments")}function g(a,b){b&&u(this,"message",b);var c=u(this,"object");return u(this,"deep")?this.eql(a):(this.assert(a===c,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",a,this._obj,!0),void 0)}function h(a,c){c&&u(this,"message",c),this.assert(b.eql(a,u(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",a,this._obj,!0)}function i(a,b){b&&u(this,"message",b);var c=u(this,"object");if(u(this,"doLength")){new t(c,b).to.have.property("length");var d=c.length;this.assert(d>a,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",a,d)}else this.assert(c>a,"expected #{this} to be above "+a,"expected #{this} to be at most "+a)}function j(a,b){b&&u(this,"message",b);var c=u(this,"object");if(u(this,"doLength")){new t(c,b).to.have.property("length");var d=c.length;this.assert(d>=a,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",a,d)}else this.assert(c>=a,"expected #{this} to be at least "+a,"expected #{this} to be below "+a)}function k(a,b){b&&u(this,"message",b);var c=u(this,"object");if(u(this,"doLength")){new t(c,b).to.have.property("length");var d=c.length;this.assert(a>d,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",a,d)}else this.assert(a>c,"expected #{this} to be below "+a,"expected #{this} to be at least "+a)}function l(a,b){b&&u(this,"message",b);var c=u(this,"object");if(u(this,"doLength")){new t(c,b).to.have.property("length");var d=c.length;this.assert(a>=d,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",a,d)}else this.assert(a>=c,"expected #{this} to be at most "+a,"expected #{this} to be above "+a)}function m(a,c){c&&u(this,"message",c);var d=b.getName(a);this.assert(u(this,"object")instanceof a,"expected #{this} to be an instance of "+d,"expected #{this} to not be an instance of "+d)}function n(a,c){c&&u(this,"message",c);var d=u(this,"object");this.assert(d.hasOwnProperty(a),"expected #{this} to have own property "+b.inspect(a),"expected #{this} to not have own property "+b.inspect(a))}function o(){u(this,"doLength",!0)}function p(a,b){b&&u(this,"message",b);var c=u(this,"object");new t(c,b).to.have.property("length");var d=c.length;this.assert(d==a,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",a,d)}function q(a){var c,d=u(this,"object"),e=!0;if(a=a instanceof Array?a:Array.prototype.slice.call(arguments),!a.length)throw new Error("keys required");var f=Object.keys(d),g=a.length;if(e=a.every(function(a){return~f.indexOf(a)}),u(this,"negate")||u(this,"contains")||(e=e&&a.length==f.length),g>1){a=a.map(function(a){return b.inspect(a)});var h=a.pop();c=a.join(", ")+", and "+h}else c=b.inspect(a[0]);c=(g>1?"keys ":"key ")+c,c=(u(this,"contains")?"contain ":"have ")+c,this.assert(e,"expected #{this} to "+c,"expected #{this} to not "+c)}function r(a,c,d){d&&u(this,"message",d);var e=u(this,"object");new t(e,d).is.a("function");var f=!1,g=null,h=null,i=null;0===arguments.length?(c=null,a=null):a&&(a instanceof RegExp||"string"==typeof a)?(c=a,a=null):a&&a instanceof Error?(g=a,a=null,c=null):"function"==typeof a?h=(new a).name:a=null;try{e()}catch(j){if(g)return this.assert(j===g,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",g,j),this;if(a&&(this.assert(j instanceof a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",h,j),!c))return this;var k="object"===b.type(j)&&"message"in j?j.message:""+j;if(null!=k&&c&&c instanceof RegExp)return this.assert(c.exec(k),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",c,k),this;if(null!=k&&c&&"string"==typeof c)return this.assert(~k.indexOf(c),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",c,k),this;f=!0,i=j}var l="",m=null!==h?h:g?"#{exp}":"an error";f&&(l=" but #{act} was thrown"),this.assert(f===!0,"expected #{this} to throw "+m+l,"expected #{this} to not throw "+m+l,g,i)}function s(a,b){return a.every(function(a){return-1!==b.indexOf(a)})}var t=a.Assertion,u=(Object.prototype.toString,b.flag);["to","be","been","is","and","have","with","that","at","of","same"].forEach(function(a){t.addProperty(a,function(){return this})}),t.addProperty("not",function(){u(this,"negate",!0)}),t.addProperty("deep",function(){u(this,"deep",!0)}),t.addChainableMethod("an",c),t.addChainableMethod("a",c),t.addChainableMethod("include",e,d),t.addChainableMethod("contain",e,d),t.addProperty("ok",function(){this.assert(u(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),t.addProperty("true",function(){this.assert(!0===u(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0)}),t.addProperty("false",function(){this.assert(!1===u(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1)}),t.addProperty("null",function(){this.assert(null===u(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),t.addProperty("undefined",function(){this.assert(void 0===u(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),t.addProperty("exist",function(){this.assert(null!=u(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),t.addProperty("empty",function(){var a=u(this,"object"),b=a;Array.isArray(a)||"string"==typeof object?b=a.length:"object"==typeof a&&(b=Object.keys(a).length),this.assert(!b,"expected #{this} to be empty","expected #{this} not to be empty")}),t.addProperty("arguments",f),t.addProperty("Arguments",f),t.addMethod("equal",g),t.addMethod("equals",g),t.addMethod("eq",g),t.addMethod("eql",h),t.addMethod("eqls",h),t.addMethod("above",i),t.addMethod("gt",i),t.addMethod("greaterThan",i),t.addMethod("least",j),t.addMethod("gte",j),t.addMethod("below",k),t.addMethod("lt",k),t.addMethod("lessThan",k),t.addMethod("most",l),t.addMethod("lte",l),t.addMethod("within",function(a,b,c){c&&u(this,"message",c);var d=u(this,"object"),e=a+".."+b;if(u(this,"doLength")){new t(d,c).to.have.property("length");var f=d.length;this.assert(f>=a&&b>=f,"expected #{this} to have a length within "+e,"expected #{this} to not have a length within "+e)}else this.assert(d>=a&&b>=d,"expected #{this} to be within "+e,"expected #{this} to not be within "+e)}),t.addMethod("instanceof",m),t.addMethod("instanceOf",m),t.addMethod("property",function(a,c,d){d&&u(this,"message",d);var e=u(this,"deep")?"deep property ":"property ",f=u(this,"negate"),g=u(this,"object"),h=u(this,"deep")?b.getPathValue(a,g):g[a];if(f&&void 0!==c){if(void 0===h)throw d=null!=d?d+": ":"",new Error(d+b.inspect(g)+" has no "+e+b.inspect(a))}else this.assert(void 0!==h,"expected #{this} to have a "+e+b.inspect(a),"expected #{this} to not have "+e+b.inspect(a));void 0!==c&&this.assert(c===h,"expected #{this} to have a "+e+b.inspect(a)+" of #{exp}, but got #{act}","expected #{this} to not have a "+e+b.inspect(a)+" of #{act}",c,h),u(this,"object",h)}),t.addMethod("ownProperty",n),t.addMethod("haveOwnProperty",n),t.addChainableMethod("length",p,o),t.addMethod("lengthOf",p,o),t.addMethod("match",function(a,b){b&&u(this,"message",b);var c=u(this,"object");this.assert(a.exec(c),"expected #{this} to match "+a,"expected #{this} not to match "+a)}),t.addMethod("string",function(a,c){c&&u(this,"message",c);var d=u(this,"object");new t(d,c).is.a("string"),this.assert(~d.indexOf(a),"expected #{this} to contain "+b.inspect(a),"expected #{this} to not contain "+b.inspect(a))}),t.addMethod("keys",q),t.addMethod("key",q),t.addMethod("throw",r),t.addMethod("throws",r),t.addMethod("Throw",r),t.addMethod("respondTo",function(a,c){c&&u(this,"message",c);var d=u(this,"object"),e=u(this,"itself"),f="function"!==b.type(d)||e?d[a]:d.prototype[a];this.assert("function"==typeof f,"expected #{this} to respond to "+b.inspect(a),"expected #{this} to not respond to "+b.inspect(a))}),t.addProperty("itself",function(){u(this,"itself",!0)}),t.addMethod("satisfy",function(a,c){c&&u(this,"message",c);var d=u(this,"object");this.assert(a(d),"expected #{this} to satisfy "+b.objDisplay(a),"expected #{this} to not satisfy"+b.objDisplay(a),this.negate?!1:!0,a(d))}),t.addMethod("closeTo",function(a,b,c){c&&u(this,"message",c);var d=u(this,"object");this.assert(Math.abs(d-a)<=b,"expected #{this} to be close to "+a+" +/- "+b,"expected #{this} not to be close to "+a+" +/- "+b)}),t.addMethod("members",function(a,b){b&&u(this,"message",b);var c=u(this,"object");return new t(c).to.be.an("array"),new t(a).to.be.an("array"),u(this,"contains")?this.assert(s(a,c),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",c,a):(this.assert(s(c,a)&&s(a,c),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",c,a),void 0)})}}),require.register("chaijs-chai/lib/chai/interface/assert.js",function(exports,require,module){module.exports=function(chai,util){var Assertion=chai.Assertion,flag=util.flag,assert=chai.assert=function(a,b){var c=new Assertion(null);c.assert(a,b,"[ negation message unavailable ]")};assert.fail=function(a,b,c,d){throw new chai.AssertionError({actual:a,expected:b,message:c,operator:d,stackStartFunction:assert.fail})},assert.ok=function(a,b){new Assertion(a,b).is.ok},assert.notOk=function(a,b){new Assertion(a,b).is.not.ok},assert.equal=function(a,b,c){var d=new Assertion(a,c);d.assert(b==flag(d,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",b,a)},assert.notEqual=function(a,b,c){var d=new Assertion(a,c);d.assert(b!=flag(d,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",b,a)},assert.strictEqual=function(a,b,c){new Assertion(a,c).to.equal(b)},assert.notStrictEqual=function(a,b,c){new Assertion(a,c).to.not.equal(b)},assert.deepEqual=function(a,b,c){new Assertion(a,c).to.eql(b)},assert.notDeepEqual=function(a,b,c){new Assertion(a,c).to.not.eql(b)},assert.isTrue=function(a,b){new Assertion(a,b).is["true"]},assert.isFalse=function(a,b){new Assertion(a,b).is["false"]},assert.isNull=function(a,b){new Assertion(a,b).to.equal(null)},assert.isNotNull=function(a,b){new Assertion(a,b).to.not.equal(null)},assert.isUndefined=function(a,b){new Assertion(a,b).to.equal(void 0)},assert.isDefined=function(a,b){new Assertion(a,b).to.not.equal(void 0)},assert.isFunction=function(a,b){new Assertion(a,b).to.be.a("function")},assert.isNotFunction=function(a,b){new Assertion(a,b).to.not.be.a("function")},assert.isObject=function(a,b){new Assertion(a,b).to.be.a("object")},assert.isNotObject=function(a,b){new Assertion(a,b).to.not.be.a("object")},assert.isArray=function(a,b){new Assertion(a,b).to.be.an("array")},assert.isNotArray=function(a,b){new Assertion(a,b).to.not.be.an("array")},assert.isString=function(a,b){new Assertion(a,b).to.be.a("string")},assert.isNotString=function(a,b){new Assertion(a,b).to.not.be.a("string")},assert.isNumber=function(a,b){new Assertion(a,b).to.be.a("number")},assert.isNotNumber=function(a,b){new Assertion(a,b).to.not.be.a("number")},assert.isBoolean=function(a,b){new Assertion(a,b).to.be.a("boolean")},assert.isNotBoolean=function(a,b){new Assertion(a,b).to.not.be.a("boolean")},assert.typeOf=function(a,b,c){new Assertion(a,c).to.be.a(b)},assert.notTypeOf=function(a,b,c){new Assertion(a,c).to.not.be.a(b)},assert.instanceOf=function(a,b,c){new Assertion(a,c).to.be.instanceOf(b)},assert.notInstanceOf=function(a,b,c){new Assertion(a,c).to.not.be.instanceOf(b)},assert.include=function(a,b,c){var d=new Assertion(a,c);if(Array.isArray(a))d.to.include(b);else{if("string"!=typeof a)throw new chai.AssertionError("expected an array or string",null,assert.include);d.to.contain.string(b)}},assert.notInclude=function(a,b,c){var d=new Assertion(a,c);if(Array.isArray(a))d.to.not.include(b);else{if("string"!=typeof a)throw new chai.AssertionError("expected an array or string",null,assert.notInclude);d.to.not.contain.string(b)}},assert.match=function(a,b,c){new Assertion(a,c).to.match(b)},assert.notMatch=function(a,b,c){new Assertion(a,c).to.not.match(b)},assert.property=function(a,b,c){new Assertion(a,c).to.have.property(b)},assert.notProperty=function(a,b,c){new Assertion(a,c).to.not.have.property(b)},assert.deepProperty=function(a,b,c){new Assertion(a,c).to.have.deep.property(b)},assert.notDeepProperty=function(a,b,c){new Assertion(a,c).to.not.have.deep.property(b)},assert.propertyVal=function(a,b,c,d){new Assertion(a,d).to.have.property(b,c)},assert.propertyNotVal=function(a,b,c,d){new Assertion(a,d).to.not.have.property(b,c)},assert.deepPropertyVal=function(a,b,c,d){new Assertion(a,d).to.have.deep.property(b,c)},assert.deepPropertyNotVal=function(a,b,c,d){new Assertion(a,d).to.not.have.deep.property(b,c)},assert.lengthOf=function(a,b,c){new Assertion(a,c).to.have.length(b)},assert.Throw=function(a,b,c,d){("string"==typeof b||b instanceof RegExp)&&(c=b,b=null),new Assertion(a,d).to.Throw(b,c)},assert.doesNotThrow=function(a,b,c){"string"==typeof b&&(c=b,b=null),new Assertion(a,c).to.not.Throw(b)},assert.operator=function(val,operator,val2,msg){if(!~["==","===",">",">=","<","<=","!=","!=="].indexOf(operator))throw new Error('Invalid operator "'+operator+'"');var test=new Assertion(eval(val+operator+val2),msg);test.assert(!0===flag(test,"object"),"expected "+util.inspect(val)+" to be "+operator+" "+util.inspect(val2),"expected "+util.inspect(val)+" to not be "+operator+" "+util.inspect(val2))},assert.closeTo=function(a,b,c,d){new Assertion(a,d).to.be.closeTo(b,c)},assert.sameMembers=function(a,b,c){new Assertion(a,c).to.have.same.members(b)},assert.includeMembers=function(a,b,c){new Assertion(a,c).to.include.members(b)},assert.ifError=function(a,b){new Assertion(a,b).to.not.be.ok},function a(b,c){return assert[c]=assert[b],a}("Throw","throw")("Throw","throws")}}),require.register("chaijs-chai/lib/chai/interface/expect.js",function(a,b,c){c.exports=function(a){a.expect=function(b,c){return new a.Assertion(b,c)}}}),require.register("chaijs-chai/lib/chai/interface/should.js",function(a,b,c){c.exports=function(a){function b(){Object.defineProperty(Object.prototype,"should",{set:function(a){Object.defineProperty(this,"should",{value:a,enumerable:!0,configurable:!0,writable:!0})},get:function(){return this instanceof String||this instanceof Number?new c(this.constructor(this)):this instanceof Boolean?new c(1==this):new c(this)},configurable:!0});var a={};return a.equal=function(a,b,d){new c(a,d).to.equal(b)},a.Throw=function(a,b,d,e){new c(a,e).to.Throw(b,d)},a.exist=function(a,b){new c(a,b).to.exist},a.not={},a.not.equal=function(a,b,d){new c(a,d).to.not.equal(b)},a.not.Throw=function(a,b,d,e){new c(a,e).to.not.Throw(b,d)},a.not.exist=function(a,b){new c(a,b).to.not.exist},a["throw"]=a.Throw,a.not["throw"]=a.not.Throw,a}var c=a.Assertion;a.should=b,a.Should=b}}),require.register("chaijs-chai/lib/chai/utils/addChainableMethod.js",function(a,b,c){var d=b("./transferFlags"),e="__proto__"in Object,f=/^(?:length|name|arguments|caller)$/,g=Function.prototype.call,h=Function.prototype.apply;c.exports=function(a,b,c,i){"function"!=typeof i&&(i=function(){}),Object.defineProperty(a,b,{get:function(){i.call(this);var b=function(){var a=c.apply(this,arguments);return void 0===a?this:a};if(e){var j=b.__proto__=Object.create(this);j.call=g,j.apply=h}else{var k=Object.getOwnPropertyNames(a);k.forEach(function(c){if(!f.test(c)){var d=Object.getOwnPropertyDescriptor(a,c);Object.defineProperty(b,c,d)}})}return d(this,b),b},configurable:!0})}}),require.register("chaijs-chai/lib/chai/utils/addMethod.js",function(a,b,c){c.exports=function(a,b,c){a[b]=function(){var a=c.apply(this,arguments);return void 0===a?this:a}}}),require.register("chaijs-chai/lib/chai/utils/addProperty.js",function(a,b,c){c.exports=function(a,b,c){Object.defineProperty(a,b,{get:function(){var a=c.call(this);return void 0===a?this:a},configurable:!0})}}),require.register("chaijs-chai/lib/chai/utils/eql.js",function(a,b,c){function d(a,b,c){if(a===b)return!0;if(h.isBuffer(a)&&h.isBuffer(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0}return b instanceof Date?a instanceof Date?a.getTime()===b.getTime():!1:"object"!=typeof a&&"object"!=typeof b?a===b:b instanceof RegExp?a instanceof RegExp?a.toString()===b.toString():!1:g(a,b,c)}function e(a){return null===a||void 0===a}function f(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function g(a,b,c){if(e(a)||e(b))return!1;if(a.prototype!==b.prototype)return!1;var g;if(c){for(g=0;g<c.length;g++)if(c[g][0]===a&&c[g][1]===b||c[g][0]===b&&c[g][1]===a)return!0}else c=[];if(f(a))return f(b)?(a=pSlice.call(a),b=pSlice.call(b),d(a,b,c)):!1;try{var h,j=i(a),k=i(b)}catch(l){return!1}if(j.length!=k.length)return!1;for(j.sort(),k.sort(),g=j.length-1;g>=0;g--)if(j[g]!=k[g])return!1;for(c.push([a,b]),g=j.length-1;g>=0;g--)if(h=j[g],!d(a[h],b[h],c))return!1;return!0}c.exports=d;var h,i=b("./getEnumerableProperties");try{h=b("buffer").Buffer}catch(j){h={isBuffer:function(){return!1}}}}),require.register("chaijs-chai/lib/chai/utils/flag.js",function(a,b,c){c.exports=function(a,b,c){var d=a.__flags||(a.__flags=Object.create(null));return 3!==arguments.length?d[b]:(d[b]=c,void 0)}}),require.register("chaijs-chai/lib/chai/utils/getActual.js",function(a,b,c){c.exports=function(a,b){var c=b[4];return"undefined"!=typeof c?c:a._obj}}),require.register("chaijs-chai/lib/chai/utils/getEnumerableProperties.js",function(a,b,c){c.exports=function(a){var b=[];for(var c in a)b.push(c);return b}}),require.register("chaijs-chai/lib/chai/utils/getMessage.js",function(a,b,c){var d=b("./flag"),e=b("./getActual"),f=(b("./inspect"),b("./objDisplay"));c.exports=function(a,b){var c=d(a,"negate"),g=d(a,"object"),h=b[3],i=e(a,b),j=c?b[2]:b[1],k=d(a,"message");return j=j||"",j=j.replace(/#{this}/g,f(g)).replace(/#{act}/g,f(i)).replace(/#{exp}/g,f(h)),k?k+": "+j:j}}),require.register("chaijs-chai/lib/chai/utils/getName.js",function(a,b,c){c.exports=function(a){if(a.name)return a.name;var b=/^\s?function ([^(]*)\(/.exec(a);return b&&b[1]?b[1]:""}}),require.register("chaijs-chai/lib/chai/utils/getPathValue.js",function(a,b,c){function d(a){var b=a.replace(/\[/g,".["),c=b.match(/(\\\.|[^.]+?)+/g);return c.map(function(a){var b=/\[(\d+)\]$/,c=b.exec(a);return c?{i:parseFloat(c[1])}:{p:a}})}function e(a,b){for(var c,d=b,e=0,f=a.length;f>e;e++){var g=a[e];d?("undefined"!=typeof g.p?d=d[g.p]:"undefined"!=typeof g.i&&(d=d[g.i]),e==f-1&&(c=d)):c=void 0}return c}c.exports=function(a,b){var c=d(a);return e(c,b)}}),require.register("chaijs-chai/lib/chai/utils/getProperties.js",function(a,b,c){c.exports=function(){function a(a){-1===b.indexOf(a)&&b.push(a)}for(var b=Object.getOwnPropertyNames(subject),c=Object.getPrototypeOf(subject);null!==c;)Object.getOwnPropertyNames(c).forEach(a),c=Object.getPrototypeOf(c);return b}}),require.register("chaijs-chai/lib/chai/utils/index.js",function(a,b,c){var a=c.exports={};a.test=b("./test"),a.type=b("./type"),a.getMessage=b("./getMessage"),a.getActual=b("./getActual"),a.inspect=b("./inspect"),a.objDisplay=b("./objDisplay"),a.flag=b("./flag"),a.transferFlags=b("./transferFlags"),a.eql=b("./eql"),a.getPathValue=b("./getPathValue"),a.getName=b("./getName"),a.addProperty=b("./addProperty"),a.addMethod=b("./addMethod"),a.overwriteProperty=b("./overwriteProperty"),a.overwriteMethod=b("./overwriteMethod"),a.addChainableMethod=b("./addChainableMethod")}),require.register("chaijs-chai/lib/chai/utils/inspect.js",function(a,b,c){function d(a,b,c){var d={showHidden:b,seen:[],stylize:function(a){return a}};return e(d,a,"undefined"==typeof c?2:c)}function e(b,c,d){if(c&&"function"==typeof c.inspect&&c.inspect!==a.inspect&&(!c.constructor||c.constructor.prototype!==c)){var o=c.inspect(d);return"string"!=typeof o&&(o=e(b,o,d)),o}var u=f(b,c);if(u)return u;if(t(c))return s(c);var v=r(c),w=b.showHidden?q(c):v;if(0===w.length||n(c)&&(1===w.length&&"stack"===w[0]||2===w.length&&"description"===w[0]&&"stack"===w[1])){if("function"==typeof c){var x=p(c),y=x?": "+x:"";return b.stylize("[Function"+y+"]","special")}if(l(c))return b.stylize(RegExp.prototype.toString.call(c),"regexp");if(m(c))return b.stylize(Date.prototype.toUTCString.call(c),"date");if(n(c))return g(c)}var z="",A=!1,B=["{","}"];if(k(c)&&(A=!0,B=["[","]"]),"function"==typeof c){var x=p(c),y=x?": "+x:"";z=" [Function"+y+"]"}if(l(c)&&(z=" "+RegExp.prototype.toString.call(c)),m(c)&&(z=" "+Date.prototype.toUTCString.call(c)),n(c))return g(c);if(0===w.length&&(!A||0==c.length))return B[0]+z+B[1];if(0>d)return l(c)?b.stylize(RegExp.prototype.toString.call(c),"regexp"):b.stylize("[Object]","special");b.seen.push(c);var C;return C=A?h(b,c,d,v,w):w.map(function(a){return i(b,c,d,v,a,A)}),b.seen.pop(),j(C,z,B)}function f(a,b){switch(typeof b){case"undefined":return a.stylize("undefined","undefined");case"string":var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string");case"number":return a.stylize(""+b,"number");case"boolean":return a.stylize(""+b,"boolean")}return null===b?a.stylize("null","null"):void 0}function g(a){return"["+Error.prototype.toString.call(a)+"]"}function h(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)Object.prototype.hasOwnProperty.call(b,String(g))?f.push(i(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(i(a,b,c,d,e,!0))}),f}function i(a,b,c,d,f,g){var h,i;if(b.__lookupGetter__&&(b.__lookupGetter__(f)?i=b.__lookupSetter__(f)?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.__lookupSetter__(f)&&(i=a.stylize("[Setter]","special"))),d.indexOf(f)<0&&(h="["+f+"]"),i||(a.seen.indexOf(b[f])<0?(i=null===c?e(a,b[f],null):e(a,b[f],c-1),i.indexOf("\n")>-1&&(i=g?i.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+i.split("\n").map(function(a){return"   "+a}).join("\n"))):i=a.stylize("[Circular]","special")),"undefined"==typeof h){if(g&&f.match(/^\d+$/))return i;h=JSON.stringify(""+f),h.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.substr(1,h.length-2),h=a.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=a.stylize(h,"string"))
}return h+": "+i}function j(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function k(a){return Array.isArray(a)||"object"==typeof a&&"[object Array]"===o(a)}function l(a){return"object"==typeof a&&"[object RegExp]"===o(a)}function m(a){return"object"==typeof a&&"[object Date]"===o(a)}function n(a){return"object"==typeof a&&"[object Error]"===o(a)}function o(a){return Object.prototype.toString.call(a)}var p=b("./getName"),q=b("./getProperties"),r=b("./getEnumerableProperties");c.exports=d;var s=function(a){if("outerHTML"in a)return a.outerHTML;var b,c="http://www.w3.org/1999/xhtml",d=document.createElementNS(c,"_"),e=((window.HTMLElement||window.Element).prototype,new XMLSerializer);return document.xmlVersion?e.serializeToString(a):(d.appendChild(a.cloneNode(!1)),b=d.innerHTML.replace("><",">"+a.innerHTML+"<"),d.innerHTML="",b)},t=function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName}}),require.register("chaijs-chai/lib/chai/utils/objDisplay.js",function(a,b,c){var d=b("./inspect");c.exports=function(a){var b=d(a),c=Object.prototype.toString.call(a);if(b.length>=40){if("[object Function]"===c)return a.name&&""!==a.name?"[Function: "+a.name+"]":"[Function]";if("[object Array]"===c)return"[ Array("+a.length+") ]";if("[object Object]"===c){var e=Object.keys(a),f=e.length>2?e.splice(0,2).join(", ")+", ...":e.join(", ");return"{ Object ("+f+") }"}return b}return b}}),require.register("chaijs-chai/lib/chai/utils/overwriteMethod.js",function(a,b,c){c.exports=function(a,b,c){var d=a[b],e=function(){return this};d&&"function"==typeof d&&(e=d),a[b]=function(){var a=c(e).apply(this,arguments);return void 0===a?this:a}}}),require.register("chaijs-chai/lib/chai/utils/overwriteProperty.js",function(a,b,c){c.exports=function(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b),e=function(){};d&&"function"==typeof d.get&&(e=d.get),Object.defineProperty(a,b,{get:function(){var a=c(e).call(this);return void 0===a?this:a},configurable:!0})}}),require.register("chaijs-chai/lib/chai/utils/test.js",function(a,b,c){var d=b("./flag");c.exports=function(a,b){var c=d(a,"negate"),e=b[0];return c?!e:e}}),require.register("chaijs-chai/lib/chai/utils/transferFlags.js",function(a,b,c){c.exports=function(a,b,c){var d=a.__flags||(a.__flags=Object.create(null));b.__flags||(b.__flags=Object.create(null)),c=3===arguments.length?c:!0;for(var e in d)(c||"object"!==e&&"ssfi"!==e&&"message"!=e)&&(b.__flags[e]=d[e])}}),require.register("chaijs-chai/lib/chai/utils/type.js",function(a,b,c){var d={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};c.exports=function(a){var b=Object.prototype.toString.call(a);return d[b]?d[b]:null===a?"null":void 0===a?"undefined":a===Object(a)?"object":typeof a}}),require.register("visionmedia-mocha-cloud/client.js",function(a,b,c){c.exports=function(a){var b=[];a.on("fail",function(a,c){b.push({title:a.title,fullTitle:a.fullTitle(),error:{message:c.message,stack:c.stack}})}),a.on("end",function(){a.stats.failed=b,global.mochaResults=a.stats})}}),require.main("visionmedia-mocha-cloud","client.js"),require.register("modelfactory/lib/index.js",function(a,b,c){function d(){return"m_"+ ++k}var e,f,g=b("./schema"),h=b("./model"),i=b("./globals"),j=b("./errors"),k=0,l={},m=[];c.exports=l,l.Schema=g,l.Error=j,f=function(a,b,c){var d=Object.keys(a);d.forEach(function(f){var g=a[f];e(f,"Object"!==g.constructor.name||!Object.keys(g).length||g.type&&!g.type.type?null:g,b,c,d)})},e=function(a,b,c,d){d||(d="");var e=(d?d+".":"")+a;return b?Object.defineProperty(c,a,{enumerable:!0,get:function(){if(this.__getters||(this.__getters={}),!this.__getters[e]){var a={};Object.defineProperty(a,"__scope__",{value:d?this.__scope__:this}),f(b,a,e),this.__getters[e]=a}return this.__getters[e]},set:function(a){(this.__scope__||this).set(e,a)}}):(Object.defineProperty(c,a,{enumerable:!0,get:function(){return this.__scope__?this.__scope__.get(e):this.get?this.get(e):this[e]},set:function(a){(this.__scope__||this).set(e,a)}}),void 0)},l.plugin=function(a,b){return m.push([a,b]),l},l.model=function(a){function b(b){b||(b={});var c=b[i.idAttribute],e=a.store.get(c);return e?(e.set(b),e):(Object.defineProperty(this,"_doc",{value:Object.create(null)}),Object.defineProperty(this,"schema",{value:a}),Object.defineProperty(this,"_callbacks",{value:Object.create(null),writable:!0}),this.cid=d(),this.id=c,this._build(b),this.emit("init",this),a.store.add(this),void 0)}if(a instanceof g||(a=new g(a)),a.model)return a.model;m.forEach(function(b){a.plugin.apply(a,b)}),a.model=b,b.prototype.__proto__=h.prototype,f(a.tree,b.prototype);for(var c in a.methods)b.prototype[c]=a.methods[c];for(c in a.statics)b[c]=a.statics[c];return b.schema=a,b},b("./schema/documentarray").model=c.exports.model}),require.main("modelfactory","lib/index.js"),require.register("modelfactory/lib/model.js",function(a,b,c){function d(){}var e=b("component-emitter"),f=b("./utils"),g=b("./globals"),h=f.getPath,i=f.hasPath,j=f.setPath;d.prototype.__proto__=e.prototype,c.exports=d,Object.defineProperty(d.prototype,"id",{get:function(){return this[g.idAttribute]},set:function(a){this.set(g.idAttribute,a)}}),Object.defineProperty(d.prototype,"isNew",{get:function(){return!this.id}}),d.prototype.equals=function(a){if(a===this)return!0;var b=a[g.idAttribute];return b?b===this.id:!1},d.prototype.get=function(a){if(!a)return this;var b=this.schema.path(a)||this.schema.virtualpath(a),c=h(this._doc,a);return b?b.applyGetters(c,this):c},d.prototype.parent=function(){return this._parent},d.prototype.parentArray=function(){return this._parentArray},d.prototype.getValue=function(a){return h(this._doc,a)},d.prototype.set=function(a,b,c){if(null==a)return this;var d,e,f,g,i,k=[],l=[],m=this._parentArray;return"string"==typeof a?(e=this.schema.path(a)||this.schema.virtualpath(a),b&&"object"==typeof b?k=this.schema.getKeyVals(b,a):e&&k.push({key:a,val:b})):(k=this.schema.getKeyVals(a),c=b),d=c&&c.silent,k.forEach(function(a){var b,c=a.key,e=a.val;if(h(this._doc,c)!==e&&(b=this.schema.path(c)||this.schema.virtualpath(c),e=b.applySetters(e,this),"virtual"!==b.instance&&j(this._doc,c,e),!d))for(g="change:"+c,(this.hasListeners(g)||m&&m.hasListeners(g))&&(l[g]=this.get(c)),i=c.split(".");i.length;)i.pop(),f=i.join("."),g="change",f&&(g+=":"+f),(this.hasListeners(g)||m&&m.hasListeners(g))&&(l[g]=this.get(f))},this),d||Object.keys(l).forEach(function(a){this.emit(a,l[a],this),m&&m.emit(a,l[a],this,m)},this),this},d.prototype._build=function(a){Object.keys(this.schema.paths).forEach(function(b){var c,d=this.schema.paths[b],e=i(a,b);if(e)c=e.val;else{if(!d.defaultValue)return;c=d.getDefault()}c=d.applySetters(c,this),j(this._doc,b,c)},this)},d.prototype.validate=function(a,b){b||(b=a||{},a=this._doc);var c,d=[];return"string"==typeof b?c=b.split(" "):"string"==typeof b.paths?c=b.paths.split(" "):Array.isArray(b)?c=b:Array.isArray(b.paths)&&(c=b.paths),c||(c=Object.keys(this.schema.paths)),c.forEach(function(b){var c=this.schema.path(b),e=h(a,b),f=c.doValidate(e,this);f&&d.push.apply(d,f)},this),d.length?d:void 0},d.prototype.dispose=function(){var a=this.parentArray();a&&a.remove(this),this.schema.store.remove(this),this.off()},d.prototype.pick=function(a){var b={};return a.split(" ").forEach(function(a){b[a]=this._doc[a]&&this._doc[a].toJSON?this._doc[a].toJSON():this._doc[a]},this),b},d.prototype.toJSON=function(){var a={};return Object.keys(this.schema.tree).forEach(function(b){a[b]=this._doc[b]&&this._doc[b].toJSON?this._doc[b].toJSON():this._doc[b]},this),a}}),require.register("modelfactory/lib/utils.js",function(a,b,c){c.exports.getPath=function(a,b){var c,d=b.split("."),e=a;for(c=0;c<d.length;c++){if(b=d[c],!e[b])return e[b];e=e[b]}return e},c.exports.hasPath=function(a,b){var c,d=b.split("."),e=a;for(c=0;c<d.length;c++){if(b=d[c],!e.hasOwnProperty(b))return!1;e=e[b]}return{val:e}},c.exports.setPath=function(a,b,c){var d=b.split("."),e=d.pop();a=d.reduce(function(a,b){return a[b]||(a[b]=Object.create(null)),a[b]},a),a&&(a[e]=c)}}),require.register("modelfactory/lib/globals.js",function(a,b,c){c.exports.idAttribute="_id"}),require.register("modelfactory/lib/schema.js",function(a,b,c){function d(a,b){a||(a={}),this.paths={},this.tree={},this.virtuals={},this.methods={},this.statics={},this.options=b||{store:!0},this.store=this.options.store?new h:h.noop,a.hasOwnProperty(i.idAttribute)||(a[i.idAttribute]={type:String}),this.add(a)}var e=b("./schema/index"),f=b("./virtualType"),g=b("./utils"),h=b("./store"),i=b("./globals"),j=g.hasPath;d.prototype.name="Schema",c.exports=d,d.Types=e,d.prototype.add=function(a,b){b||(b=""),Object.keys(a).forEach(function(c){if(!a[c])throw new TypeError("Invalid value for schema path `"+(b+c)+"`");a[c].constructor&&"Object"!==a[c].constructor.name&&(a[c]={type:a[c]}),Array.isArray(a[c])||Array.isArray(a[c].type)?this.path(b+c,a[c]):a[c].type instanceof d?this.path(b+c,a[c]):a[c].type&&"function"==typeof a[c].type?this.path(b+c,a[c]):this.add(a[c],b+c+".")},this)},d.prototype.path=function(a,b){var c,e,f;return b?(f=a.split(/\./),e=f.pop(),c=this.tree,f.forEach(function(b,d){if(c[b]||(c[b]={}),"object"!=typeof c[b])throw new Error("Cannot set nested path `"+a+"`.\nParent path `"+f.slice(0,d).concat([b]).join(".")+"\nalready set to type "+c[b].name+".");c=c[b]}),c[e]=b,this.paths[a]=d.interpretAsType(a,b),this):this.paths[a]?this.paths[a]:void 0},d.prototype.virtualpath=function(a){return this.virtuals[a]},d.interpretAsType=function(a,b){var c=b.type&&!b.type.type?b.type:{};if(b.type instanceof d)return new e.EmbeddedDocument(a,b);if(Array.isArray(b)||Array.isArray(b.type))return new e.DocumentArray(a,b);var f=e.getSchemaType(c);if(!f)throw new TypeError("Undefined type at "+a);return new f(a,b)},d.prototype.virtual=function(a){var b=this.virtuals,c=a.split(".");return b[a]=c.reduce(function(b,d,e){return b[d]||(b[d]=e===c.length-1?new f(a):{}),b[d]},this.tree),b[a]},d.prototype.getKeyVals=function(a,b){var c,d=[];return b?(c={},c[b]=a):c=a,Object.keys(this.paths).forEach(function(a){var b=j(c,a);b&&d.push({key:a,val:b.val})}),d},d.prototype.plugin=function(a,b){return a(this,b),this},d.prototype.method=function(a,b){if("string"!=typeof a)for(var c in a)this.methods[c]=a[c];else this.methods[a]=b;return this},d.prototype.static=function(a,b){if("string"!=typeof a)for(var c in a)this.statics[c]=a[c];else this.statics[a]=b;return this}}),require.register("modelfactory/lib/store.js",function(a,b,c){function d(){this.caches=Object.create(null),this.indexes=[],this.index("id"),this.clear()}var e=function(){};d.prototype.index=function(a){this.indexes.push(a),this.caches[a]=Object.create(null)},d.prototype.clear=function(){this.indexes.forEach(function(a){this.caches[a]=Object.create(null)},this)},d.prototype.getBy=function(a,b){return this.caches[a][b]},d.prototype.get=function(a){return this.caches.id[a]},d.prototype.add=function(a){this.indexes.forEach(function(b){var c=a[b];c&&(this.caches[b][c]=a)},this)},d.prototype.remove=function(a){this.indexes.forEach(function(b){delete this.caches[b][a.id]},this)},d.noop={clear:e,get:e,getBy:e,add:e,remove:e},c.exports=d}),require.register("modelfactory/lib/type.js",function(a,b,c){function d(a){this.path=a,this.getters=[],this.setters=[]}c.exports=d,d.prototype.get=function(a){return this.getters.push(a),this},d.prototype.set=function(a){return this.setters.push(a),this},d.prototype.applySetters=function(a,b){var c=a,d=this;return this.setters.forEach(function(a){c=a.call(b,c,d)}),this.cast(c,b)},d.prototype.applyGetters=function(a,b){var c=a,d=this;return this.getters.forEach(function(a){c=a.call(b,c,d)}),c},d.prototype.cast=function(a){return a},d.prototype.default=function(a){return this.defaultValue="function"==typeof a?a:this.cast(a),this},d.prototype.getDefault=function(a){var b="function"==typeof this.defaultValue?this.defaultValue.call(a):this.defaultValue;return b}}),require.register("modelfactory/lib/schemaType.js",function(a,b,c){function d(a,b,c){f.call(this,a),this.options=b,this.instance=c,this.validators=[],Object.keys(b).forEach(function(a){var c=this[a];c&&"function"==typeof c&&this[a].call(this,b[a])},this)}var e=b("./errors/validator"),f=b("./type");d.prototype.__proto__=f.prototype,c.exports=d,d.prototype.validate=function(a,b){return this.validators.push([a,b]),this},d.prototype.doValidate=function(a,b){if(!this.validators.length)return null;var c=null,d=this.path,f=function(a,b,f){a||(c||(c=[]),c.push(new e(d,b,f)))};return this.validators.forEach(function(c){var d=c[0],e=c[1];f(d.call(b,a),e,a)}),c},d.prototype.required=function(){var a=function(a){return a?!0:!1};return this.validators.push([a,"required"])}}),require.register("modelfactory/lib/virtualType.js",function(a,b,c){function d(a){e.call(this,a),this.instance="virtual"}var e=b("./type");c.exports=d,d.prototype.__proto__=e.prototype}),require.register("modelfactory/lib/errors/index.js",function(a,b,c){c.exports.ValidatorError=b("./validator"),c.exports.CastError=b("./cast")}),require.register("modelfactory/lib/errors/validator.js",function(a,b,c){function d(a,b,c){var d;d=b?'"'+b+'"':"",this.message="Validator "+d+" failed for path "+a,2<arguments.length&&(this.message+=" with value "+String(c)),Error.call(this),this.name="ValidatorError",this.path=a,this.type=b,this.value=c}d.prototype.__proto__=Error.prototype,c.exports=d}),require.register("modelfactory/lib/errors/cast.js",function(a,b,c){function d(a,b,c){var d;d=b?'"'+b+'"':"",this.message="Cast "+d+" failed for path "+a,2<arguments.length&&(this.message+=" with value "+String(c)),Error.call(this),this.name="CastError",this.path=a,this.type=b,this.value=c}d.prototype.__proto__=Error.prototype,c.exports=d}),require.register("modelfactory/lib/schema/index.js",function(a,b,c){var d={String:b("./string"),ObjectId:b("./objectid"),Number:b("./number"),Boolean:b("./boolean"),Date:b("./date"),DocumentArray:b("./documentarray"),EmbeddedDocument:b("./embedded")};c.exports=d,c.exports.getSchemaType=function(a){if(a===d.ObjectId)return d.ObjectId;var b="string"==typeof a?a:a.name;return d[b]},d.DocumentArray.getSchemaType=c.exports.getSchemaType}),require.register("modelfactory/lib/schema/date.js",function(a,b,c){function d(a,b){e.call(this,a,b,"Date")}var e=b("../schemaType"),f=b("../errors"),g=f.CastError;d.prototype.__proto__=e.prototype,d.prototype.cast=function(a){if(null===a||""===a)return null;if(a instanceof Date)return a;var b;if(a instanceof Number||"number"==typeof a||String(a)===Number(a)?b=new Date(Number(a)):a.toString&&(b=new Date(a.toString())),"Invalid Date"!==b.toString())return b;throw new g(this.path,"date",a)},c.exports=d}),require.register("modelfactory/lib/schema/boolean.js",function(a,b,c){function d(a,b){e.call(this,a,b,"Boolean")}var e=b("../schemaType");d.prototype.__proto__=e.prototype,d.prototype.cast=function(a){return null===a?a:"0"===a?!1:"true"===a?!0:"false"===a?!1:!!a},c.exports=d}),require.register("modelfactory/lib/schema/number.js",function(a,b,c){function d(a,b){e.call(this,a,b,"Number")}var e=b("../schemaType"),f=b("../errors"),g=f.CastError;d.prototype.__proto__=e.prototype,c.exports=d,d.prototype.min=function(a){var b=function(b){return b?b>=a:!0};return this.validators.push([b,"min"])},d.prototype.max=function(a){var b=function(b){return b?a>=b:!0};return this.validators.push([b,"max"])},d.prototype.cast=function(a){if(!isNaN(a)){if(null===a)return a;if(""===a)return null;if("string"==typeof a&&(a=Number(a)),a instanceof Number)return a;if("number"==typeof a)return a}throw new g(this.path,"number",a)}}),require.register("modelfactory/lib/schema/string.js",function(a,b,c){function d(a,b){e.call(this,a,b,"String")}var e=b("../schemaType"),f=b("../errors"),g=f.CastError;d.prototype.__proto__=e.prototype,c.exports=d,d.prototype.match=function(a){var b=function(b){return b?a.test(b):!0};this.validators.push([b,"match"])},d.prototype.enum=function(a){var b=function(b){return b?-1===a.indexOf(b)?!1:!0:!0};this.validators.push([b,"enum"])},d.prototype.cast=function(a){if(!a)return a;if(a.toString)return a.toString();throw new g(this.path,"string",a)}}),require.register("modelfactory/lib/schema/objectid.js",function(a,b,c){function d(a,b){e.call(this,a,b,"ObjectId")}var e=b("../schemaType");d.prototype.__proto__=e.prototype,c.exports=d}),require.register("modelfactory/lib/schema/documentarray.js",function(a,b,c){function d(a,b){var c,g,h;c=b.type[0],c.type&&"function"==typeof c.type&&(g=d.getSchemaType(c.type),this.arrType=new g("",c),c=c.type),this.DocArray=function(a,b){return this._parent=b,f.call(this,a)},this.DocArray.prototype.__proto__=f.prototype,"Schema"===c.name||"Object"===c.constructor.name?(h=d.model(c),this.DocArray.prototype._cast=function(a){var b=a;return a instanceof h||(b=new h(a)),b._parent||(b._parent=this._parent),b._parentArray||(b._parentArray=this),b}):(g=d.getSchemaType(c),this.DocArray.prototype._cast=function(a){return g.prototype.cast.call(this,a)}),e.call(this,a,b,"DocumentArray")}var e=b("../schemaType"),f=b("pgherveou-modelarray");d.prototype.__proto__=e.prototype,d.prototype.cast=function(a,b){return a instanceof this.DocArray?a:(a&&!Array.isArray(a)&&(a=[a]),new this.DocArray(a,b))},d.prototype.doValidate=function(a){var b=e.prototype.doValidate.apply(this,arguments);if(b)return b;if(a)return a.forEach(function(c){var d;c.validate?d=c.validate():this.arrType&&(d=this.arrType.doValidate(c)),d&&(b||(b=[]),[].push.apply(b,d.map(function(b){var d=b.path;return b.path=this.path+"."+a.indexOf(c),d&&(b.path+="."+d),b},this)))},this),b},d.prototype.min=function(a){var b=function(b){return b?b.length>=a:!0};return this.validators.push([b,"min"])},d.prototype.max=function(a){var b=function(b){return b?b.length<=a:!0};return this.validators.push([b,"max"])},c.exports=d}),require.register("modelfactory/lib/schema/embedded.js",function(a,b,c){function d(a,b){this.schema=b.type?b.type:b,e.call(this,a,b,"EmbeddedDocument")}var e=b("../schemaType"),f=b("../globals");d.prototype.__proto__=e.prototype,d.prototype.cast=function(a,b){if(!a)return a;var c;if(a instanceof this.schema.model)c=a;else if("string"==typeof a){var d={};d[f.idAttribute]=a,c=new this.schema.model(d)}else c=new this.schema.model(a);return c.parent||(c.parent=b),c},d.prototype.doValidate=function(a){var b=e.prototype.doValidate.apply(this,arguments);if(b)return b;if(a)return b=a.validate(),b&&b.map(function(a){return a.path=this.path+"."+a.path,a},this),b},c.exports=d});